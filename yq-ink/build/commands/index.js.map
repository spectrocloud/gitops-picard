{"version":3,"sources":["../components/TextInput.js","../components/SelectInput.js","../components/MultiSelectInput.js","../components/Switch/index.js","../components/Error.js","index.js"],"names":["TextInput","onBlur","onFocus","props","React","useEffect","SelectInput","onSubmit","onChange","value","map","label","v","concat","filter","item","Context","createContext","Switch","children","MultiCase","contextValue","useContext","Array","isArray","includes","Case","Error","console","warn","args","error","npmCache","checkPackage","name","undefined","fetch","then","response","json","code","OPS","BLACKLIST_TAGS","wait","ms","Promise","resolve","setTimeout","executeCommand","command","file","exec","stdout","stderr","log","message","CliForm","activeField","setActiveField","useState","submission","setSubmission","exit","useApp","files","setFiles","initialized","setInitialized","data","setFormData","tags","setTags","options","names","filterCount","setFilters","filterOps","setFilterOps","filterStep","setFilterStep","allStores","setAllStores","done","setDone","useInput","input","state","init","glob","sync","_","cloneDeep","set","stores","fileContent","fs","readFileSync","yaml","parse","flat","uniq","reduce","accumulator","store","Object","keys","tag","get","fields","useMemo","filterFields","from","length","__","index","Input","format","inputConfig","items","option","MultiSelectInput","operation","replace","validate","semver","valid","Boolean","affectedStores","conditions","filters","every","op","terminate","submit","out","newTag","executions","join","allSettled","filtersComplete","renderTagPrompt","handleSubmit","validating","placeholder","meta","invalid","touched","inactive","toUpperCase"],"mappings":"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","file":"index.js","sourceRoot":"../../commands","sourcesContent":["import React from 'react'\nimport InkTextInput from 'ink-text-input'\n\nexport default function TextInput({ onBlur, onFocus, ...props }) {\n\tReact.useEffect(() => {\n\t\tonFocus()\n\t\treturn onBlur\n\t}, [onFocus, onBlur])\n\treturn <InkTextInput {...props} showCursor />\n}\n","import React from 'react'\nimport InkSelectInput from 'ink-select-input'\n\nexport default function SelectInput({\n\tonSubmit,\n\tonBlur,\n\tonChange,\n\tonFocus,\n\t...props\n}) {\n\tReact.useEffect(() => {\n\t\tonFocus()\n\t\treturn onBlur\n\t}, [onFocus, onBlur])\n\treturn (\n\t\t<InkSelectInput\n\t\t\t{...props}\n\t\t\tonSelect={({ value }) => {\n\t\t\t\tonChange(value)\n\t\t\t\tonSubmit()\n\t\t\t}}\n\t\t/>\n\t)\n}\n","import React from 'react'\nimport InkMultiSelect from 'ink-multi-select'\n\nexport default function SelectInput({\n\tonBlur,\n\tonChange,\n\tonFocus,\n\tvalue = [],\n\t...props\n}) {\n\tReact.useEffect(() => {\n\t\tonFocus()\n\t\treturn onBlur\n\t}, [onFocus, onBlur])\n\n\treturn (\n\t\t<InkMultiSelect\n\t\t\t{...props}\n      selected={value.map(value => ({label: value, value}))}\n\t\t\tonSelect={({ value: v }) => onChange(value.concat(v))}\n\t\t\tonUnselect={({ value: v }) => onChange(value.filter(item => item !== v))}\n\t\t/>\n\t)\n}\n","import React, { createContext, useContext } from \"react\";\n\nconst Context = createContext();\n\nexport default function Switch({ value, children }) {\n  return <Context.Provider value={value}>{children}</Context.Provider>;\n}\n\nfunction MultiCase({ value, children }) {\n  const contextValue = useContext(Context);\n  if (Array.isArray(value) && value.includes(contextValue)) {\n    return children || null;\n  }\n\n  return null;\n}\n\nfunction Case({ value, children }) {\n  const contextValue = useContext(Context);\n\n  if (contextValue !== value) {\n    return null;\n  }\n\n  return children || null;\n}\n\nSwitch.Case = Case;\nSwitch.MultiCase = MultiCase;\n","import React from 'react'\nimport { Box, Color } from 'ink'\n\nexport default function Error({ children }) {\n\treturn (\n\t\t<Box>\n\t\t\t<Color red>{children}</Color>\n\t\t</Box>\n\t)\n}\n","import React, { useEffect, useMemo, useState } from \"react\";\nimport { Form, Field } from \"react-final-form\";\nimport { AppContext, Box, Color, Static, Text, useApp, useInput } from \"ink\";\nimport TextInput from \"../components/TextInput\";\nimport SelectInput from \"../components/SelectInput\";\nimport MultiSelectInput from \"../components/MultiSelectInput\";\nimport Switch from \"../components/Switch\";\nimport Error from \"../components/Error\";\nimport semver from \"semver\";\nimport fetch from \"node-fetch\";\nimport Spinner from \"ink-spinner\";\nimport glob from \"glob\";\nimport _ from \"lodash\";\nimport yaml from \"yaml\";\nimport fs from \"fs\";\nimport { exec } from \"child_process\";\n\nif (true) {\n\tconsole.warn = function (...args) {\n\t\treturn;\n\t};\n\n\tconsole.error = function (...args) {\n\t\treturn;\n\t};\n}\n\nconst npmCache = {};\nconst checkPackage = (name) => {\n\tif (npmCache[name] === undefined) {\n\t\treturn fetch(`https://api.npms.io/v2/package/${name}`)\n\t\t\t.then((response) => response.json())\n\t\t\t.then((json) => {\n\t\t\t\tnpmCache[name] = json.code !== \"NOT_FOUND\";\n\t\t\t\treturn npmCache[name];\n\t\t\t});\n\t}\n\treturn npmCache[name];\n};\n\nconst OPS = [\n\t{\n\t\tlabel: \"Change version of infra profile\",\n\t\tvalue: \"infra\",\n\t},\n\t{\n\t\tlabel: \"Change version of addon-profile\",\n\t\tvalue: \"addon\",\n\t},\n\t{\n\t\tlabel: \"Add a new addon profile\",\n\t\tvalue: \"add-profile\",\n\t},\n];\n\nconst BLACKLIST_TAGS = [\"latlng\"];\n\nfunction wait(ms) {\n\treturn new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nfunction executeCommand(command, file) {\n\treturn new Promise((resolve) => {\n\t\texec(`${command} ${file}`, async (error, stdout, stderr) => {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(`error: ${error.message}`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (stderr) {\n\t\t\t\tconsole.log(`stderr: ${stderr}`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresolve();\n\t\t});\n\t});\n}\n\n/// CliForm\nexport default function CliForm() {\n\tconst [activeField, setActiveField] = React.useState(0);\n\tconst [submission, setSubmission] = React.useState();\n\tconst { exit } = useApp();\n\n\tconst [files, setFiles] = useState([]);\n\tconst [initialized, setInitialized] = useState(false);\n\tconst [data, setFormData] = useState({});\n\tconst [tags, setTags] = useState({ options: {}, names: [] });\n\tconst [filterCount, setFilters] = useState(0);\n\tconst [filterOps, setFilterOps] = useState([]);\n\tconst [filterStep, setFilterStep] = useState(\"pending\");\n\tconst [allStores, setAllStores] = useState([]);\n\tconst [done, setDone] = useState(false);\n\n\tuseInput((input) => {\n\t\tif (activeField === (filterCount + 1) * 2 + 1) {\n\t\t\tif ([\"a\", \"o\"].includes(input)) {\n\t\t\t\tsetFilterOps((state) => {\n\t\t\t\t\treturn [...state, input === \"a\" ? \"and\" : \"or\"];\n\t\t\t\t});\n\t\t\t\tsetFilters((state) => state + 1);\n\t\t\t}\n\n\t\t\tif (input === \"c\") {\n\t\t\t\tsetFilterStep(\"continue\");\n\t\t\t}\n\t\t}\n\t});\n\n\tuseEffect(() => {\n\t\tasync function init() {\n\t\t\tconst files = glob.sync(\"*.yaml\");\n\t\t\tsetFiles(files);\n\t\t\tsetInitialized(true);\n\t\t\tsetFormData((data) => _.cloneDeep(_.set(data, \"files\", files)));\n\t\t}\n\n\t\tinit();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (activeField === 1) {\n\t\t\tconst files = data.files;\n\n\t\t\tif (!files) {\n\t\t\t\texit();\n\t\t\t}\n\n\t\t\tconst stores = files\n\t\t\t\t.map((file) => {\n\t\t\t\t\tconst fileContent = fs.readFileSync(file, \"utf8\");\n\t\t\t\t\treturn yaml.parse(fileContent);\n\t\t\t\t})\n\t\t\t\t.flat();\n\n\t\t\tsetAllStores(stores);\n\n\t\t\tconst names = _.uniq(\n\t\t\t\tstores.reduce((accumulator, store) => {\n\t\t\t\t\tconst tags = Object.keys(store.tags);\n\n\t\t\t\t\treturn accumulator.concat(tags);\n\t\t\t\t}, [])\n\t\t\t).filter((tag) => !BLACKLIST_TAGS.includes(tag));\n\n\t\t\tconst options = names.reduce((accumulator, tag) => {\n\t\t\t\taccumulator[tag] = _.uniq(\n\t\t\t\t\tstores.map((store) => _.get(store, `tags.${tag}`))\n\t\t\t\t);\n\t\t\t\treturn accumulator;\n\t\t\t}, {});\n\n\t\t\tsetTags({ names, options });\n\t\t}\n\t}, [activeField, data]);\n\n\tconst fields = useMemo(() => {\n\t\tconst filterFields = Array.from({ length: filterCount + 1 })\n\t\t\t.map((__, index) => [\n\t\t\t\t{\n\t\t\t\t\tname: `filters.${index}.tag`,\n\t\t\t\t\tlabel: \"Filter tag\",\n\t\t\t\t\tInput: SelectInput,\n\t\t\t\t\tformat: null, // prevents empty value from being ''\n\t\t\t\t\tinputConfig: {\n\t\t\t\t\t\titems: tags.names.map((tag) => ({ label: tag, value: tag })),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: `filters.${index}.value`,\n\t\t\t\t\tlabel: \"Filter value\",\n\t\t\t\t\tInput: SelectInput,\n\t\t\t\t\tformat: null, // prevents empty value from being ''\n\t\t\t\t\tinputConfig: {\n\t\t\t\t\t\titems: (\n\t\t\t\t\t\t\ttags.options?.[_.get(data, `filters.${index}.tag`)] || []\n\t\t\t\t\t\t).map((option) => ({ label: option, value: option })),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t])\n\t\t\t.flat();\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tname: \"files\",\n\t\t\t\tlabel: \"Files\",\n\t\t\t\tInput: MultiSelectInput,\n\t\t\t\tformat: null, // prevents empty value from being ''\n\t\t\t\tinputConfig: {\n\t\t\t\t\titems: files.map((file) => ({ label: file, value: file })),\n\t\t\t\t},\n\t\t\t},\n\t\t\t...filterFields,\n\t\t\tfilterStep === \"continue\" && {\n\t\t\t\tname: \"operation\",\n\t\t\t\tlabel: \"Operation\",\n\t\t\t\tInput: SelectInput,\n\t\t\t\tformat: null, // prevents empty value from being ''\n\t\t\t\tinputConfig: {\n\t\t\t\t\titems: OPS,\n\t\t\t\t},\n\t\t\t},\n\t\t\t[\"infra\", \"addon\"].includes(data.operation) && {\n\t\t\t\tname: \"newTag\",\n\t\t\t\tlabel: \"Select new tag\",\n\t\t\t\tInput: TextInput,\n\t\t\t\tformat: (value) =>\n\t\t\t\t\tvalue === undefined ? \"\" : value.replace(/[^0-9.]/g, \"\"),\n\t\t\t\tvalidate: (value) =>\n\t\t\t\t\t!value\n\t\t\t\t\t\t? \"Required\"\n\t\t\t\t\t\t: semver.valid(value)\n\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t: \"Invalid semantic version\",\n\t\t\t},\n\t\t].filter(Boolean);\n\t}, [files, filterCount, tags, data, filterStep]);\n\n\tconst affectedStores = useMemo(() => {\n\t\treturn allStores.filter((store) => {\n\t\t\tconst conditions = data?.filters?.map((filter) => {\n\t\t\t\treturn _.get(store, `tags.${filter.tag}`) === filter.value;\n\t\t\t});\n\n\t\t\tif (filterOps.length === 0) {\n\t\t\t\treturn conditions?.[0] || false;\n\t\t\t}\n\n\t\t\treturn filterOps.every((op, index) => {\n\t\t\t\tif (op === \"and\") {\n\t\t\t\t\treturn conditions[index] && conditions[index + 1];\n\t\t\t\t}\n\t\t\t\tif (op === \"or\") {\n\t\t\t\t\treturn conditions[index] || conditions[index + 1];\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}, [allStores, data]);\n\n\tuseEffect(() => {\n\t\tasync function terminate() {\n\t\t\tawait wait(1000);\n\t\t\texit();\n\t\t}\n\n\t\tasync function submit() {\n\t\t\tconst conditions = data.filters.map((filter, index) => {\n\t\t\t\tlet out = `.tags.${filter.tag} == \"${filter.value}\"`;\n\n\t\t\t\tif (filterOps[index / 2]) {\n\t\t\t\t\treturn `${out} ${filterOps[index / 2]} `;\n\t\t\t\t}\n\n\t\t\t\treturn out;\n\t\t\t});\n\n\t\t\tconst operation = `profiles.[${\n\t\t\t\tdata.operation === \"infra\" ? 0 : 1\n\t\t\t}].tag = \"${data.newTag}\"`;\n\n\t\t\tconst executions = data.files.map((file) => {\n\t\t\t\treturn executeCommand(\n\t\t\t\t\t`yq -i '[.[] | select(${conditions.join(\" \")}).${operation}]'`,\n\t\t\t\t\tfile\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tawait Promise.allSettled(executions);\n\t\t\tawait wait(1000);\n\t\t\tsetDone(true);\n\t\t\texit();\n\t\t}\n\n\t\tconst filtersComplete = data.filters?.every((filter) => !!filter.value);\n\n\t\tif (\n\t\t\tallStores.length > 0 &&\n\t\t\taffectedStores.length === 0 &&\n\t\t\tdata.filters?.length > 0 &&\n\t\t\tfiltersComplete\n\t\t) {\n\t\t\tterminate();\n\t\t}\n\n\t\tif (submission) {\n\t\t\tsubmit();\n\t\t}\n\t}, [submission, affectedStores, data]);\n\n\tif (submission) {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Text>\n\t\t\t\t\tAffected stores: {affectedStores.map((store) => store.name).join(\",\")}\n\t\t\t\t</Text>\n\t\t\t\t<Text>\n\t\t\t\t\tOperation:\n\t\t\t\t\t<Switch value={data.operation}>\n\t\t\t\t\t\t<Switch.Case value=\"infra\">\n\t\t\t\t\t\t\tUpdate infrastructure profile to {data.newTag}\n\t\t\t\t\t\t</Switch.Case>\n\t\t\t\t\t</Switch>\n\t\t\t\t\t<Switch value={data.operation}>\n\t\t\t\t\t\t<Switch.Case value=\"addon\">\n\t\t\t\t\t\t\tUpdate addon profile to {data.newTag}\n\t\t\t\t\t\t</Switch.Case>\n\t\t\t\t\t</Switch>\n\t\t\t\t</Text>\n\t\t\t\t<Text>{done ? \"✅ Yaml files updated\" : <Spinner />}</Text>\n\t\t\t</>\n\t\t);\n\t}\n\n\tfunction renderTagPrompt() {\n\t\tif (filterStep === \"pending\" && activeField === (filterCount + 1) * 2 + 1) {\n\t\t\tif (affectedStores.length === 0) {\n\t\t\t\treturn <Text>Affected stores: None... Terminating</Text>;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\t<>\n          <Text> </Text>\n\t\t\t\t\t<Text>\n\t\t\t\t\t\t<Text bold>Affected stores: </Text>\n\t\t\t\t\t\t{affectedStores.map((store) => store.name).join(\",\")}\n\t\t\t\t\t</Text>\n\t\t\t\t\t<Text>Add more filters ?</Text>\n\t\t\t\t\t<Text><Text bold>A</Text>(nd) <Text bold>O</Text>(r) <Text bold>C</Text>(onfirm)</Text>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\t}\n\n\n\tif (!initialized) {\n    return null;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Form onSubmit={setSubmission} initialValues={{files: files}}>\n\t\t\t\t{({ handleSubmit, validating }) => (\n\t\t\t\t\t<Box flexDirection=\"column\">\n\t\t\t\t\t\t{fields.map(\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\tlabel,\n\t\t\t\t\t\t\t\t\tplaceholder,\n\t\t\t\t\t\t\t\t\tformat,\n\t\t\t\t\t\t\t\t\tvalidate,\n\t\t\t\t\t\t\t\t\tInput,\n\t\t\t\t\t\t\t\t\tinputConfig,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tindex\n\t\t\t\t\t\t\t) => (\n\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\t\tkey={name}\n\t\t\t\t\t\t\t\t\t\tformat={format}\n\t\t\t\t\t\t\t\t\t\tvalidate={validate}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{({ input, meta }) => (\n\t\t\t\t\t\t\t\t\t\t\t<Box flexDirection=\"column\">\n\t\t\t\t\t\t\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Text bold={activeField === index}>{label}: </Text>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{activeField === index ? (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...input}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...inputConfig}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(...args) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinput.onChange(...args);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetFormData((data) =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_.cloneDeep(_.set(data, name, args[0]))\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonSubmit={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (meta.valid && !validating) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetActiveField((value) => value + 1); // go to next field\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactiveField === fields.length - 1 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfilterStep !== \"pending\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// last field, so submit\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleSubmit();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinput.onBlur(); // mark as touched to show error\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(input.value && <Text>{Array.isArray(input.value) ? input.value.join(\", \") : input.value}</Text>) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(placeholder && <Color gray>{placeholder}</Color>)\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{validating && name === \"name\" && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box marginLeft={1}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Color yellow>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Spinner type=\"dots\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Color>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{meta.invalid && meta.touched && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box marginLeft={2}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Color red>✖</Color>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\t{meta.valid && meta.touched && meta.inactive && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box marginLeft={2}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Color green>✔</Color>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t{meta.error && meta.touched && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Error>{meta.error}</Error>\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t<Text>\n\t\t\t\t\t\t\t\t\t\t{name.includes(\"value\")\n\t\t\t\t\t\t\t\t\t\t\t? filterOps[index / 2 - 1]?.toUpperCase?.()\n\t\t\t\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\t\t\t</Form>\n\t\t\t{renderTagPrompt()}\n\t\t</>\n\t);\n}\n"]}